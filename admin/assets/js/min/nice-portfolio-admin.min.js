/**
 * Nice Portfolio by NiceThemes
 *
 * @package Nice_Portfolio
 * @license GPL-2.0+
 */
var NicePortfolioAdmin=function($){"use strict";var e=function(){if(nice_portfolio_vars.wp_version>="3.5"){var e;window.formfield="",$("body").on("click",".nice_portfolio_upload_button",function(i){i.preventDefault();var o=$(this);return window.formfield=$(this).parent().prev(),e?void e.open():(e=wp.media.frames.file_frame=wp.media({title:nice_portfolio_vars.add_to_gallery,button:{text:nice_portfolio_vars.add_to_gallery_button},library:{type:o.data("library")?o.data("library"):""},multiple:!0}),e.on("select",function(){var i=e.state().get("selection"),o;$(".nice-portfolio-gallery-placeholder .clear").remove(),i.each(function(e,i){e=e.toJSON();var t="undefined"!=typeof e.sizes.thumbnail?e.sizes.thumbnail.url:e.sizes.full.url;window.formfield.val(e.url),o='<li class="image-container" data-attachment-name="'+e.name+'">',o+='<img src="'+t+'" alt="" />',o+='<ul class="actions">',o+='<li><a href="#" class="remove nice_upload_'+e.id+'">'+nice_portfolio_vars.remove_text+"</a></li>",o+='<li><a href="'+e.editLink+'" class="edit nice_upload_'+e.id+'">'+nice_portfolio_vars.edit_text+"</a></li>",o+="</ul>",o+="</li>",$(".nice-portfolio-gallery-placeholder").append(o)}),$(".nice-portfolio-gallery-placeholder").append('<div class="clear"></div>'),t()}),void e.open())})}},i=function(){$("body").on("click",".remove",function(e){e.preventDefault(),$(e.target).closest(".image-container").remove(),t()})},o=function(){var e=$(".nice-portfolio-gallery-placeholder");e.sortable({stop:function(){t()}}),e.disableSelection()},t=function(){var e=[];$(".image-container").each(function(){e.push($(this).attr("data-attachment-name"))}),$('input[name="_project_gallery"]').val(e.join())},a=function(){e(),i(),o()};return{ready:a}}(jQuery);jQuery(NicePortfolioAdmin.ready);